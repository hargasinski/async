<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>cargo.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-async.html">async</a><ul class='methods'><li data-type='method'><a href="module-async.html#.apply">apply</a></li><li data-type='method'><a href="module-async.html#.applyEach">applyEach</a></li><li data-type='method'><a href="module-async.html#.applyEachSeries">applyEachSeries</a></li><li data-type='method'><a href="module-async.html#.asyncify">asyncify</a></li><li data-type='method'><a href="module-async.html#.auto">auto</a></li><li data-type='method'><a href="module-async.html#.autoInject">autoInject</a></li><li data-type='method'><a href="module-async.html#.cargo">cargo</a></li><li data-type='method'><a href="module-async.html#.compose">compose</a></li><li data-type='method'><a href="module-async.html#.concat">concat</a></li><li data-type='method'><a href="module-async.html#.concatSeries">concatSeries</a></li><li data-type='method'><a href="module-async.html#.constant">constant</a></li><li data-type='method'><a href="module-async.html#.detect">detect</a></li><li data-type='method'><a href="module-async.html#.detectLimit">detectLimit</a></li><li data-type='method'><a href="module-async.html#.detectSeries">detectSeries</a></li><li data-type='method'><a href="module-async.html#.doDuring">doDuring</a></li><li data-type='method'><a href="module-async.html#.doUntil">doUntil</a></li><li data-type='method'><a href="module-async.html#.doWhilst">doWhilst</a></li><li data-type='method'><a href="module-async.html#.during">during</a></li><li data-type='method'><a href="module-async.html#.each">each</a></li><li data-type='method'><a href="module-async.html#.eachLimit">eachLimit</a></li><li data-type='method'><a href="module-async.html#.eachOf">eachOf</a></li><li data-type='method'><a href="module-async.html#.eachOfLimit">eachOfLimit</a></li><li data-type='method'><a href="module-async.html#.eachOfSeries">eachOfSeries</a></li><li data-type='method'><a href="module-async.html#.eachSeries">eachSeries</a></li><li data-type='method'><a href="module-async.html#.ensureAsync">ensureAsync</a></li><li data-type='method'><a href="module-async.html#.every">every</a></li><li data-type='method'><a href="module-async.html#.everyLimit">everyLimit</a></li><li data-type='method'><a href="module-async.html#.everySeries">everySeries</a></li><li data-type='method'><a href="module-async.html#.filter">filter</a></li><li data-type='method'><a href="module-async.html#.filterLimit">filterLimit</a></li><li data-type='method'><a href="module-async.html#.filterSeries">filterSeries</a></li><li data-type='method'><a href="module-async.html#.forever">forever</a></li><li data-type='method'><a href="module-async.html#.iterator">iterator</a></li><li data-type='method'><a href="module-async.html#.log">log</a></li><li data-type='method'><a href="module-async.html#.log">log</a></li><li data-type='method'><a href="module-async.html#.map">map</a></li><li data-type='method'><a href="module-async.html#.mapLimit">mapLimit</a></li><li data-type='method'><a href="module-async.html#.mapSeries">mapSeries</a></li><li data-type='method'><a href="module-async.html#.mapValues">mapValues</a></li><li data-type='method'><a href="module-async.html#.mapValuesLimit">mapValuesLimit</a></li><li data-type='method'><a href="module-async.html#.mapValuesSeries">mapValuesSeries</a></li><li data-type='method'><a href="module-async.html#.memoize">memoize</a></li><li data-type='method'><a href="module-async.html#.nextTick">nextTick</a></li><li data-type='method'><a href="module-async.html#.parallel">parallel</a></li><li data-type='method'><a href="module-async.html#.parallel">parallel</a></li><li data-type='method'><a href="module-async.html#.priorityQueue">priorityQueue</a></li><li data-type='method'><a href="module-async.html#.queue">queue</a></li><li data-type='method'><a href="module-async.html#.race">race</a></li><li data-type='method'><a href="module-async.html#.reduce">reduce</a></li><li data-type='method'><a href="module-async.html#.reduceRight">reduceRight</a></li><li data-type='method'><a href="module-async.html#.reflect">reflect</a></li><li data-type='method'><a href="module-async.html#.reflectAll">reflectAll</a></li><li data-type='method'><a href="module-async.html#.reject">reject</a></li><li data-type='method'><a href="module-async.html#.rejectLimit">rejectLimit</a></li><li data-type='method'><a href="module-async.html#.rejectSeries">rejectSeries</a></li><li data-type='method'><a href="module-async.html#.retry">retry</a></li><li data-type='method'><a href="module-async.html#.retryable">retryable</a></li><li data-type='method'><a href="module-async.html#.seq">seq</a></li><li data-type='method'><a href="module-async.html#.series">series</a></li><li data-type='method'><a href="module-async.html#.setImmediate">setImmediate</a></li><li data-type='method'><a href="module-async.html#.some">some</a></li><li data-type='method'><a href="module-async.html#.someLimit">someLimit</a></li><li data-type='method'><a href="module-async.html#.someSeries">someSeries</a></li><li data-type='method'><a href="module-async.html#.sortBy">sortBy</a></li><li data-type='method'><a href="module-async.html#.timeout">timeout</a></li><li data-type='method'><a href="module-async.html#.times">times</a></li><li data-type='method'><a href="module-async.html#.timesLimit">timesLimit</a></li><li data-type='method'><a href="module-async.html#.timesSeries">timesSeries</a></li><li data-type='method'><a href="module-async.html#.transform">transform</a></li><li data-type='method'><a href="module-async.html#.unmemoize">unmemoize</a></li><li data-type='method'><a href="module-async.html#.until">until</a></li><li data-type='method'><a href="module-async.html#.waterfall">waterfall</a></li><li data-type='method'><a href="module-async.html#.whilst">whilst</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">cargo.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import queue from './internal/queue';

/**
 * A cargo of tasks for the worker function to complete. Cargo inherits all of
 * the same methods and event callbacks as {@link async.queue}.
 * @typedef {Object} CargoObject
 * @memberOf module:async
 * @property {Function} length - A function returning the number of items
 * waiting to be processed. Invoke like `cargo.length()`.
 * @property {number} payload - An `integer` for determining how many tasks
 * should be process per round. This property can be changed after a `cargo` is
 * created to alter the payload on-the-fly.
 * @property {Function} push - Adds `task` to the `queue`. The callback is
 * called once the `worker` has finished processing the task. Instead of a
 * single task, an array of `tasks` can be submitted. The respective callback is
 * used for every task in the list. Invoke like `cargo.push(task, [callback])`.
 * @property {Function} saturated - A callback that is called when the
 * `queue.length()` hits the concurrency and further tasks will be queued.
 * @property {Function} empty - A callback that is called when the last item
 * from the `queue` is given to a `worker`.
 * @property {Function} drain - A callback that is called when the last item
 * from the `queue` has returned from the `worker`.
 * @property {Function} idle - a function returning false if there are items
 * waiting or being processed, or true if not. Invoke like `cargo.idle()`.
 * @property {Function} pause - a function that pauses the processing of tasks
 * until `resume()` is called. Invoke like `cargo.pause()`.
 * @property {Function} resume - a function that resumes the processing of
 * queued tasks when the queue is paused. Invoke like `cargo.resume()`.
 * @property {Function} kill - a function that removes the `drain` callback and
 * empties remaining tasks from the queue forcing it to go idle. Invoke like `cargo.kill()`.
 */

/**
 * Creates a `cargo` object with the specified payload. Tasks added to the
 * cargo will be processed altogether (up to the `payload` limit). If the
 * `worker` is in progress, the task is queued until it becomes available. Once
 * the `worker` has completed some tasks, each callback of those tasks is
 * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)
 * for how `cargo` and `queue` work.
 *
 * While [queue](#queue) passes only one task to one of a group of workers
 * at a time, cargo passes an array of tasks to a single worker, repeating
 * when the worker is finished.
 *
 * @name cargo
 * @static
 * @memberOf module:async
 * @method
 * @see [async.queue]{@link module:async.queue}
 * @category Control Flow
 * @param {Function} worker - An asynchronous function for processing an array
 * of queued tasks, which must call its `callback(err)` argument when finished,
 * with an optional `err` argument. Invoked with `(tasks, callback)`.
 * @param {number} [payload=Infinity] - An optional `integer` for determining
 * how many tasks should be processed per round; if omitted, the default is
 * unlimited.
 * @returns {module:async.CargoObject} A cargo object to manage the tasks. Callbacks can
 * attached as certain properties to listen for specific events during the
 * lifecycle of the cargo and inner queue.
 * @example
 *
 * // create a cargo object with payload 2
 * var cargo = async.cargo(function(tasks, callback) {
 *     for (var i=0; i&lt;tasks.length; i++) {
 *         console.log('hello ' + tasks[i].name);
 *     }
 *     callback();
 * }, 2);
 *
 * // add some items
 * cargo.push({name: 'foo'}, function(err) {
 *     console.log('finished processing foo');
 * });
 * cargo.push({name: 'bar'}, function(err) {
 *     console.log('finished processing bar');
 * });
 * cargo.push({name: 'baz'}, function(err) {
 *     console.log('finished processing baz');
 * });
 */
export default function cargo(worker, payload) {
    return queue(worker, 1, payload);
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Jun 20 2016 22:10:59 GMT-0400 (EDT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
